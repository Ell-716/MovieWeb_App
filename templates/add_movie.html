<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Add Movie - MovieWeb App</title>
</head>
<body>
    <h1>Add Movie</h1>

    <!-- Movie search or manual entry form -->
    <form method="POST" action="/users/{{ user_id }}/add_movie">
        <!-- Optional: Search for movie by title -->
        <label for="search_title">Search for a movie:</label>
        <input type="text" id="search_title" name="search_title" value="{{ search_title }}">
        <button type="submit">Search</button>
    </form>

    {% if movies %}
        <!-- Show movie search results if any -->
        <h3>Select a movie from the search results:</h3>
        <form method="POST" action="/users/{{ user_id }}/add_movie">
            {% for movie in movies %}
                <div>
                    <input type="radio" id="movie{{ loop.index }}" name="selected_movie" value="{{ movie['imdbID'] }}">
                    <label for="movie{{ loop.index }}">{{ movie['Title'] }} ({{ movie['Year'] }})</label>
                </div>
            {% endfor %}
            <button type="submit">Select Movie</button>
        </form>
    {% else %}
        <!-- No search results, show manual movie entry -->
        <h3>Or, add movie manually:</h3>
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
        <br>
        <label for="year">Release Year:</label>
        <input type="text" id="year" name="year" required>
        <br>
        <button type="submit">Add Movie</button>
    {% endif %}

    <!-- Display success or error messages -->
    {% if warning_message %}
        <p style="color: red;">{{ warning_message }}</p>
    {% elif success_message %}
        <p style="color: green;">{{ success_message }}</p>
    {% endif %}

    <a href="/movies"><button>Back to Movies</button></a>
</body>
</html>
